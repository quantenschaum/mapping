import L from 'leaflet';

export const WeatherForecast = L.Control.extend({
  options: {position: 'topleft'},
  onAdd: function (map) {
    const div = L.DomUtil.create('div', 'weather-forecast leaflet-bar leaflet-control xhidebuttons');

    const css = document.createElement('style');
    css.innerHTML = '.weather-forecast.hidebuttons a:not(:first-child) { display: none; border: none; } .weather-forecast img { margin-top: 3px; width: 24px; height: 24px; }';
    document.head.appendChild(css);

    function button(name, title, url) {
      const b = L.DomUtil.create('a');
      b.innerHTML = name;
      b.title = title;
      if (url) b.addEventListener('click', () => {
        window.open(typeof url === 'function' ? url(map) : url, '_blank').focus();
      });
      return b;
    }

    div.appendChild(button('&#x26C5;', 'Wetter'));

    div.appendChild(button('<img src="data:image/png;base64,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"/>', 'DWD Seeweter', 'https://www.dwd.de/DE/leistungen/seewetternordostsee/seewetternordostsee.html'));

    div.appendChild(button('<img src="data:image/png;base64,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"/>', 'Windy', m => `https://www.windy.com/${m.getCenter().lat}/${m.getCenter().lng}`));

    div.appendChild(button('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IB2cksfwAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+kHBQsbNYuxLJAAAAPbSURBVFjDxZdfTFt1FMc/5/a2ZQUGAzuylmxIHBhQg7pg4oPL9rBke2BuiW6Jijo0mmUPPinRB0lMFl8dWTacDyRTY4o6o0QWMIhZFrON4TJ1LgaRAmuZCwPKn7LS9viwUFtsoUDXnad7f79zf+dzv+f8fvdc4T7aOTYX5km4Ue5H8B7K7AWEjiC8K8j6rEP04dppiDQDVQCKdpjZCn4JV6kpHBNkX/y4Km1ZUeIyrucM4aQgRQkAEI2oxX1PlThPidMhlpOC7E/uob3bGBq9ZxC/4N4top+AuJZw6wbIOEQnJQ6nmM0Ch2CZbKv0ZhziEq5Sq3AG2JaOfxi9AMuipm+9lG43RdsAZ3pPqL9GfS4AI0PVf9iUaFf6AKDItYXrNUF4qLJeEdfHFpHjINbF8w8ceRWMlCG8CxerrokeyuwFMukBqUvls+loI9HpGW63epJIod41KdFJiaNA5r8VSAlgLd2EkZdL0esvJJ2PwtCqlbhAUb5NLO0Czyzll/NIJQD2ivIUHrK6dPxM6QabRM8KUruc77onHr2r+mww6XyE8M0Vp6MHZ25OmgAAhfv3ABD89XpyHdDgipRoAkuh2D4DEgBs5ZspPFCH/cEtRKZnmOr6iamOH3HU1sSUGGs5nWKL6uyKIPaKuwXYG3uLHDvujz6guOFgwhZ0vvUa/sajOGofB+B2q4dA+w9J15wldw5upQfRh7tJoCF+rOyLE6yv23U3t4Epgr1XmbveT9h/E3tFOaGhG3gPvMnk1x2gmgLCTC8dfbhfMoT348fyd20nf/dOJr85y/jpLwl8343eCcXmH77Ww1TXOSba2pdaOrKH/tB/9ZHCLlJSZRXzokBuwtarriAyEWD+xmjS56r/uYpZvIG/nz1E4LuuVId2sEZ9jiV3RyclDqtYPIsBAOZ+/zMlAMB093kQYcunzax78rFUZ4Qt/i4pxEYxjwtSvZrT1P/eh0QCUxj5eTzU7YnVziKztMSVgpGkDl4EXlntNyX0l5fBfQ2Eb41h5OdR9tUpNr59GCQx85U47TGixT2hTYx2Acdavq6hwWEmPj+DRqJYncXk7XiayMQkwb7f4lIQOXaK2Zn/FeYVcbcCL2ejA7+jkaqnGP0jIR2Xce9QqM/Wf4glrv03FpoTQzghGWz3ljMjDsIE2Mp4vWBUZjaMBhUZBh0RZFhhSJWRKIyADM0j/TGIJrCIyDsrWh4NCYwp4hN0IAp+VHyKDoD6FdM3wPDg8xBNZz2zDlc9yNZFQcZBBgA/qE9VBuIDtDPsbYJIpjQzBQlEVQ9G0RFFvH34Rt+AcDb/1P8FuihH91T45tcAAAAASUVORK5CYII=" />', 'WindFinder', m => `https://de.windfinder.com/#${m.getZoom()}/${m.getCenter().lat}/${m.getCenter().lng}`));

    div.addEventListener('mouseover', () => div.classList.remove('hidebuttons'));
    div.addEventListener('mouseout', () => div.classList.add('hidebuttons'));

    L.DomEvent.disableClickPropagation(div);
    return div;
  },
});
